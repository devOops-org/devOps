## 3.1_매핑_API_이해하기
- 매핑은 색인 시 데이터가 어디에 어떻게 저장될지를 결정하는 설정
- 데이터베이스의 스키마에 대응하는 개념으로 인덱스에 추가되는 각 데이터 타입으로 구체적으로 정의하는 일
- 문서에 존재하는 필드의 속성을 정의할 때 각 필드 속성에는 `데이터 타입`과 `메타데이터`가 포함된다.
- 이를 통해 색인 과정에서 문서가 어떻게 역색인(Inverted Index)으로 변환되는지를 상세하게 정의할 수 있다.

> **스키마리스를 사용시 주의할 점**
- 엘라스틱서치는 기본적으로 스키마리스이기 때문에 명시적으로 필드를 정의하지 않아도 데이터 유형에 따라 필드 데이터 타입에 대한 매핑 정보가 자동 생성된다.
- 동적 매핑을 하게 되면 문서에 새로운 필드가 추가될 때마다 인덱스가 자동으로 업데이터 되기 때문에 쉽고 편리하지만
  한번 정의된 필드에 서로 다른 타입의 데이터가 입력된다면 뒤에 입력딘 데이터의 색인 생성에 실패한다.
- **매핑 정보를 설정할 때 고민할 점**
    - 문자열을 분석할 것인가?
    - `_source`에 어떤 필드를 정의할 것인가?
    - 날짜 필드를 가지는 필드는 무엇인가?
    - 매핑에 정의되지 않고 유입되는 필드는 어떻게 처리할 것인가?

### 매핑 인덱스 만들기
- `실제 검색 대상이 되는 필드`는 분석 가능하도록 `text` 타입으로 정의
- `해당 정보를 그대로 조회`하기 위해 integer, keyword 타입으로 정의
- 특정 필드에 내부적으로 또 다른 문서 구조를 갖도록 정의하여 `계층형 구조`로 설정이 가능

### 매핑 확인
- 이미 만들어진 매핑을 확인하려면 엘라스틱 서치에서 제공하는 _mapping API 를 사용할 수 있다.
```shell
GET {index 명}/_mapping
```
